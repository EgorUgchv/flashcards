@model Card

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Quizlet</title>
    <meta name="description" content="Урок HTML разметки">
    <meta name="keywords" content="htm;">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" asp-append-version="true">
    @*<link rel="stylesheet" href="~/css/fonts.css" asp-append-version="true"/>*@
    <link rel="stylesheet" href="~/css/MainStyles.css" asp-append-version="true"/>
</head>

<body>

<main class="main">


    <div class="container">
        <div class="new__module d-flex justify-content-between mt-5">
            <h1>Создать новый модуль</h1>
            <a class="btn btn-primary" asp-controller="Cards" asp-action="learning" type="submit">Создать</a>
        </div>

        <div class="card mt-5 p-2 pb-3">
            <h3>Название</h3>
            <input class="form-control w-100" placeholder="Введите название">
        </div>

        <form asp-controller="Cards" asp-action="Create" method="post" class="cards">
            <div class="card mt-6" id="card">
                <h4 class="card__counter ps-3 pt-2">1</h4>
                <div class="card-body row">
                    <div class="term col">
                        <h3>Термин</h3>
                        <input class="form-control w-100" asp-for="Term" placeholder="Введите термин">
                    </div>
                    <div class="definition col">
                        <h3>Определение</h3>
                        <input class="form-control w-100" asp-for="Definition" placeholder="Введите определение">
                    </div>
                </div>
            </div>
        
        <input type="submit" value="Создать" id = "create__cards" class="btn btn-primary mt-2" />
        </form>
        <button class="new__card w-100 d-flex justify-content-center align-items-center mt-4 mt-s rounded-2" style="height: 5rem" onclick="addCard()" type="submit">
            <h3>+ Добавить карточку</h3>
        </button>

        <script>
                            var currentCardNumber = 1; 
                    
                            function updateCounter() {
                                var count = document.getElementsByClassName('card').length;
                                document.getElementById('card__counter').textContent = 'Количество карт: ' + count;
                            }
                    
                            function addCard() {
                                currentCardNumber++;
                    
                                let newCardHTML = `
                                        <div class="card mt-4">
                                            <h4 class="card__counter ps-3 pt-2">${currentCardNumber}</h4>
                                            <div class="card-body row">
                                                <div class="term col">
                                                    <h3>Термин</h3>
                                                    <input class="form-control w-100" asp-for="Term" placeholder="Введите термин">
                                                </div>
                                                <div class="definition col">
                                                    <h3>Определение</h3>
                                                    <input class="form-control w-100" asp-for="Definition" placeholder="Введите определение">
                                                </div>
                                            </div>
                                        </div>
                                `;
                                let newCard = document.createElement('div');
                                newCard.classList.add('.')
                                newCard.innerHTML = newCardHTML;
                                
                                let addNewCard = document.querySelector('.cards');
                                let referenceNode = document.getElementById('create__cards');
                                addNewCard.insertBefore(newCard, referenceNode);
                                
                                /*let addNewCard = document.querySelector('.cards');
                                addNewCard.appendChild(newCard);*/
                                
                                updateCounter();
                            }
                            window.onload = updateCounter;
                            document.addEventListener('DOMContentLoaded', function() {
                                                      let form = document.querySelector('.new__card');
                                                      form.addEventListener('submit', function (e){
                                                          e.preventDefault();
                                                          addCard();
                                                         });
                                                    });
                            
                        </script>
    </div>
</main>
</body>

</html>